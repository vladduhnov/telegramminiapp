var n=require("react");function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var t=/*#__PURE__*/e(n),u=function(){var n;return"undefined"!=typeof window&&null!=(n=window)&&null!=(n=n.Telegram)&&n.WebApp?window.Telegram.WebApp:null},o=n.createContext(u()),r={smoothButtonsTransition:!1,smoothButtonsTransitionMs:10},l=n.createContext(r),i=function(){return{MainButton:{current:null},BackButton:{current:null}}},c=n.createContext({MainButton:{current:null},BackButton:{current:null}}),a=function(){},s=function(e){var t=e.id,u=e.show,o=void 0===u?a:u,r=e.hide,i=void 0===r?a:r,c=e.currentShowedIdRef,s=n.useContext(l),f=s.smoothButtonsTransition,d=s.smoothButtonsTransitionMs;n.useEffect(function(){return o(),c.current=t,function(){f?(c.current=null,setTimeout(function(){c.current||i()},d)):(i(),c.current=null)}},[i,t,c,o,f,d])},f=function(){return n.useContext(o)};function d(){return d=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u])}return n},d.apply(this,arguments)}exports.BackButton=function(e){var t=e.onClick,u=n.useContext(c),o=n.useId(),r=f(),l=null==r?void 0:r.BackButton;return n.useEffect(function(){if(t&&l)return l.onClick(t),function(){l.offClick(t)}},[t,l]),s({show:null==l?void 0:l.show,hide:null==l?void 0:l.hide,currentShowedIdRef:u.BackButton,id:o}),null},exports.MainButton=function(e){var t=e.text,u=void 0===t?"CONTINUE":t,o=e.progress,r=void 0!==o&&o,l=e.disable,i=e.disabled,a=void 0!==i&&i,d=e.color,v=e.textColor,p=e.onClick,m=n.useContext(c),w=n.useId(),h=f(),b=null==h?void 0:h.MainButton,x=null==h?void 0:h.themeParams,C=l||a;return n.useEffect(function(){null==b||b.setParams({color:d||(null==x?void 0:x.button_color)||"#fff"})},[d,x,b]),n.useEffect(function(){null==b||b.setParams({text_color:v||(null==x?void 0:x.button_text_color)||"#000"})},[b,x,v]),n.useEffect(function(){null==b||b.setText(u)},[u,b]),n.useEffect(function(){C?null==b||b.disable():C||null==b||b.enable()},[C,b]),n.useEffect(function(){r?null==b||b.showProgress(!1):r||null==b||b.hideProgress()},[r,b]),n.useEffect(function(){if(p)return null==b||b.onClick(p),function(){null==b||b.offClick(p)}},[p,b]),s({show:null==b?void 0:b.show,hide:null==b?void 0:b.hide,currentShowedIdRef:m.MainButton,id:w}),null},exports.WebAppProvider=function(e){var a,s,f,v,p=e.children,m=e.options,w=(a=!(null==m||!m.async),f=(s=n.useState(!1))[0],v=s[1],n.useEffect(function(){var n;if(a)if(null!=(n=window.Telegram)&&n.WebApp)v(!0);else{var e="undefined"!=typeof window&&window.TelegramWebviewProxy&&window.TelegramWebviewProxy.postEvent;window.TelegramWebviewProxy?window.TelegramWebviewProxy.postEvent=function(){var n;null==e||e.apply(void 0,[].slice.call(arguments)),null!=(n=window.Telegram)&&n.WebApp&&(v(!0),window.TelegramWebviewProxy.postEvent=e)}:window.TelegramWebviewProxy={postEvent:function(){var n;null==e||e.apply(void 0,[].slice.call(arguments)),null!=(n=window.Telegram)&&n.WebApp&&(v(!0),delete window.TelegramWebviewProxy)}}}},[a]),f),h=n.useMemo(function(){return d({},r,m)},[m]),b=n.useMemo(i,[]),x=n.useMemo(u,[w]);return n.useEffect(function(){if(null!=m&&m.smoothButtonsTransition){var n=function(){var n,e;null==x||null==(n=x.MainButton)||n.hide(),null==x||null==(e=x.BackButton)||e.hide()};return window.addEventListener("beforeunload",n),function(){return window.removeEventListener("beforeunload",n)}}},[x,null==m?void 0:m.smoothButtonsTransition]),t.default.createElement(c.Provider,{value:b},t.default.createElement(o.Provider,{value:x},t.default.createElement(l.Provider,{value:h},p)))},exports.useCloudStorage=function(){var e,t=null==(e=f())?void 0:e.CloudStorage,u=n.useCallback(function(n){return new Promise(function(e,u){null==t||t.getItem(n,function(n,t){n?u(n):e(t)})})},[t]),o=n.useCallback(function(n,e){return new Promise(function(u,o){null==t||t.setItem(n,e,function(n,e){!n&&e?u():o(n)})})},[t]),r=n.useCallback(function(n){return new Promise(function(e,u){null==t||t.getItems(n,function(n,t){!n&&t?e(t):u(n)})})},[t]),l=n.useCallback(function(n){return new Promise(function(e,u){null==t||t.removeItem(n,function(n,t){!n&&t?e():u(n)})})},[t]),i=n.useCallback(function(n){return new Promise(function(e,u){null==t||t.removeItems(n,function(n,t){!n&&t?e():u(n)})})},[t]),c=n.useCallback(function(){return new Promise(function(n,e){null==t||t.getKeys(function(t,u){!t&&u?n(u):e(t)})})},[t]);return n.useMemo(function(){return{getItem:u,setItem:o,getItems:r,removeItem:l,removeItems:i,getKeys:c}},[t])},exports.useExpand=function(){var e=f(),t=n.useState(null==e?void 0:e.isExpanded),u=t[0],o=t[1];return n.useEffect(function(){if(e){var n=function(n){n.isStateStable&&o(e.isExpanded)};return e.onEvent("viewportChanged",n),function(){return e.offEvent("viewportChanged",n)}}},[e]),[u,n.useCallback(function(){return null==e||null==e.expand?void 0:e.expand()},[e])]},exports.useHapticFeedback=function(){var e=f(),t=null==e?void 0:e.HapticFeedback,u=n.useCallback(function(){return null==t?void 0:t.impactOccurred.apply(t,[].slice.call(arguments))},[t]),o=n.useCallback(function(){return null==t?void 0:t.notificationOccurred.apply(t,[].slice.call(arguments))},[t]),r=n.useCallback(function(){return null==t?void 0:t.selectionChanged.apply(t,[].slice.call(arguments))},[t]);return[u,o,r]},exports.useInitData=function(){var n=f();return[null==n?void 0:n.initDataUnsafe,null==n?void 0:n.initData]},exports.useReadTextFromClipboard=function(){var e=f();return n.useCallback(function(){return new Promise(function(n){null==e||null==e.readTextFromClipboard||e.readTextFromClipboard(n)})},[e])},exports.useScanQrPopup=function(){var e=f(),t=n.useCallback(function(){return null==e||null==e.showScanQrPopup?void 0:e.showScanQrPopup.apply(e,[].slice.call(arguments))},[e]);return[t,n.useCallback(function(){return null==e||null==e.closeScanQrPopup?void 0:e.closeScanQrPopup()},[e])]},exports.useShowPopup=function(){var e=f();return n.useCallback(function(n){return new Promise(function(t,u){try{null==e||null==e.showPopup||e.showPopup(n,function(n){t(n)})}catch(n){u(n)}})},[e])},exports.useSwitchInlineQuery=function(){var e=f();return n.useCallback(function(){return null==e||null==e.switchInlineQuery?void 0:e.switchInlineQuery.apply(e,[].slice.call(arguments))},[e])},exports.useThemeParams=function(){var e=f(),t=n.useState(null==e?void 0:e.colorScheme),u=t[0],o=t[1],r=n.useState((null==e?void 0:e.themeParams)||{}),l=r[0],i=r[1];return n.useEffect(function(){if(e){var n=function(){o(e.colorScheme),i(e.themeParams)};return e.onEvent("themeChanged",n),function(){e.offEvent("themeChanged",n)}}},[e]),[u,l]},exports.useWebApp=function(){return f()};
